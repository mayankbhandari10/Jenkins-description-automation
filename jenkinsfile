post {
    failure {
        script {
            // This block will execute when the build fails
            def failureReason = currentBuild.rawBuild.getLog(1000).find { line -> line.contains("Error:") }
            echo "Failure Reason: ${failureReason}" // Add this line for debugging
            if (failureReason) {
                def description = "Build failed due to: ${failureReason}"
                echo "Setting Description: ${description}" // Add this line for debugging
                currentBuild.description = description
            } else {
                currentBuild.description = "Build failed (reason not found)"
            }
        }
    }
}

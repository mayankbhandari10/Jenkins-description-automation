pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                script {
                    def logText = """This is a sample log.
                    More log text here.
                    """
                    def consoleLog = currentBuild.rawBuild.getLog(1000)

                    def errorPattern = /Error: (.*)/
                    echo "Console Log:"
                    echo consoleLog

                    if (logText =~ errorPattern) {
                        def errorMessage = (logText =~ errorPattern)[0][1]
                        currentBuild.description = "Error: ${errorMessage}"
                        error("Error: ${errorMessage}")
                    }
                }
            }
        }
    }
}
